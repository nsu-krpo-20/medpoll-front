'use strict';var Yjd=new w(null,"parent-uri","parent-uri",-371819908);jK.set("app.thumbnail-renderer",lK(xz));var Zjd=""+(CK??"");
function $jd(a){return IL(function(b){var c=new Image;uK(c,"onload",function(){b.next(c);return b.complete()});uK(c,"crossOrigin","anonymous");uK(c,"onerror",function(d){return b.error(d)});uK(c,"onabort",function(){var d=oi("operation aborted",eh.C(B([new l(null,3,[Kt,vQa,Ak,U_a,dp,"operation aborted"],null),null])),null);return b.error(d)});uK(c,"src",a);return function(){uK(c,"src","");uK(c,"onload",null);uK(c,"onerror",null);return uK(c,"onabort",null)}})}
function akd(a){return hM(qwb,eM(Fw,zM(new l(null,5,[hv,a,Qw,az,Wy,Kz,Gw,w1a,ICa,!0],null))))}function bkd(a){var b=HM(a,"href");return n(b)?eM(function(c){PM(a,"href",c);return a},akd(b)):VL()}function ckd(a,b){var c=a.documentElement;var d=a.createElementNS("http://www.w3.org/2000/svg","style");KM(d,a.createTextNode(b));return KM(c,d)}
function dkd(a,b){return rM(pM(of(ckd,a),kM(function(c,d){var e=C(d,0,null);d=C(d,1,null);return yC(c,e,d)},b,hM(function(c){return eM(function(d){return new J(null,2,5,M,[c,d],null)},akd(c))},eM(Tc,TL(Ch(/url\((https?:\/\/[^)]+)\)/,b)))))))}function ekd(a,b){return bM(B([rM(hM(bkd,TL(Vwb(a,"image")))),dkd(a,b),XL(a)]))}function fkd(a){return(new DOMParser).parseFromString(a,"image/svg+xml")}function gkd(a){a=a.documentElement;return(new XMLSerializer).serializeToString(a)}
function hkd(a,b,c){a=fkd(a);return eM(gkd,eM(function(d){var e=d.documentElement,g=HM(e,"width");e=HM(e,"height");if(!n(kD(g,e))){g=d.documentElement;e=HM(d.documentElement,"viewBox");if("string"===typeof e){var h=AC(e,/\s+/);C(h,0,null);C(h,1,null);e=C(h,2,null);h=C(h,3,null);e=hD(e,0);h=hD(h,0);var m=e/h;h=e>h?new J(null,2,5,M,[c,1/m*c],null):new J(null,2,5,M,[c*m,c],null)}else h=null;e=C(h,0,null);h=C(h,1,null);PM(g,"width",""+(e??""));PM(g,"height",""+(h??""))}return d},ekd(a,b)))}
function ikd(a){return IL(function(b){var c=wK.createElement("canvas");c.width=a.width;c.height=a.height;c.getContext("bitmaprenderer").transferFromImageBitmap(a);c.toBlob(function(d){b.next(d);return b.complete()});return mf(null)})}
function jkd(a){var b=D$a(a.width,300);return hM(ikd,hM(function(c){return pM(function(){return swb(c)},hM(function(d){return createImageBitmap(d,{resizeWidth:b,resizeQuality:"medium"})},$jd(c)))},eM(xM,eM(function(c){return rwb(c,"image/svg+xml")},hkd(a.data,a.styles,b)))))}function kkd(a){var b=a.data;if(sC(Zjd,a.origin)){a=b.id;var c=b.payload;b=b.scope;return null!=c&&x.j(b,"penpot/thumbnail-renderer")?OL(of(lkd,a),of(mkd,a),jkd(c)):null}return null}
function nkd(a,b,c){a={id:a,type:b,scope:"penpot/thumbnail-renderer",payload:c};return window===parent?null:parent.postMessage(a,Zjd)}function lkd(a,b){return nkd(a,"success",b)}function mkd(a,b){return nkd(a,"failure",ri(b))}
function okd(){window.addEventListener("message",kkd);nkd(null,"ready",null);if(kK("app.thumbnail-renderer",nm)){var a=function(){return new Qh(function(){return new J(null,3,5,M,[new J(null,2,5,M,[dp,"initialized"],null),new J(null,2,5,M,[Y6a,""+(CK??"")],null),new J(null,2,5,M,[Yjd,""+(Zjd??"")],null)],null)})}(),b=nK();hK(function(){var c=r(a),d=Uf.j(GC,c);c=VC.g(eh.C(B([null,null])));c=new l(null,7,[Mn,c,xA,b,Zv,d,ik,yG(),wq,new Qh(function(){return mK(d)}),Vp,"app.thumbnail-renderer",Jt,nm],
null);return Bf.j(iK,mf(c))})}return null}ma("app.thumbnail_renderer.init",okd);okd();
//# sourceMappingURL=thumbnail-renderer.859146ddc.js.map
